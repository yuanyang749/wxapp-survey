---
type: "always_apply"
---

# 项目规则文档索引

**项目**: wxapp-survey (微信小程序投票系统)  
**技术栈**: 微信小程序 + Supabase BaaS  
**创建时间**: 2025 年 9 月 7 日  
**文档版本**: v1.0.0

## 📋 规则文档概览

本项目包含完整的开发、部署和运维规范文档，确保项目的高质量交付和长期维护。

### 🏗️ 核心规则文档

#### 1. [PROJECT_RULES.md](../PROJECT_RULES.md) - 项目总体规范

**内容概要**:

- 项目概述和架构特性
- 代码架构规范和文件结构约束
- 技术栈规范和禁用技术清单
- 用户体验规范和动画效果约束
- 开发流程规范和代码提交规范
- 监控日志规范和维护规范

**适用人员**: 全体开发人员  
**重要程度**: ⭐⭐⭐⭐⭐

#### 2. [SUPABASE_RULES.md](./SUPABASE_RULES.md) - 数据库规范

**内容概要**:

- 数据库架构规范和表结构设计
- RLS 安全策略配置
- 存储过程和函数规范
- Storage 存储规范和文件路径约定
- 查询优化规范和性能监控
- 数据维护规范和备份策略

**适用人员**: 后端开发人员、数据库管理员  
**重要程度**: ⭐⭐⭐⭐⭐

#### 3. [API_RULES.md](./API_RULES.md) - 接口规范

**内容概要**:

- API 架构概述和统一响应格式
- 认证接口规范（微信登录）
- 投票接口规范（CRUD 操作）
- 文件上传接口规范
- 数据统计和查询接口规范
- 错误处理和性能优化规范

**适用人员**: 前端开发人员、后端开发人员  
**重要程度**: ⭐⭐⭐⭐

## 🎯 规则执行优先级

### 🚨 强制执行规则 (必须遵守)

#### 安全相关

- ✅ 所有数据库表必须启用 RLS
- ✅ 用户输入必须进行验证和过滤
- ✅ 敏感信息不得硬编码在代码中
- ✅ 文件上传必须验证类型和大小

#### 架构相关

- ✅ 禁止使用 ES6 import/export 语法
- ✅ 所有数据操作必须通过服务类
- ✅ 页面文件不得超过规定行数限制
- ✅ 必须使用统一的错误处理机制

#### 用户体验相关

- ✅ 数据加载时必须显示骨架屏
- ✅ 所有异步操作必须有加载状态
- ✅ 错误信息必须用户友好
- ✅ 页面权限检查必须在 onLoad 中执行

### ⚠️ 建议遵守规则 (推荐执行)

#### 性能优化

- 📊 使用分页加载大量数据
- 📊 图片进行压缩和懒加载
- 📊 合理使用缓存机制
- 📊 定期清理无用资源

#### 代码质量

- 🔧 保持代码注释的完整性
- 🔧 使用有意义的变量和函数名
- 🔧 定期重构和优化代码
- 🔧 编写必要的单元测试

## 📊 规则遵守检查清单

### 开发阶段检查

```markdown
#### 代码规范检查

- [ ] 文件命名符合 kebab-case 规范
- [ ] 类名使用 PascalCase 规范
- [ ] 方法名使用 camelCase 规范
- [ ] 文件行数未超过限制

#### 功能实现检查

- [ ] 权限检查已实现
- [ ] 错误处理已完善
- [ ] 加载状态已添加
- [ ] 用户反馈已实现

#### 安全检查

- [ ] 输入验证已实现
- [ ] RLS 策略已配置
- [ ] 敏感信息已移除
- [ ] 文件上传已限制
```

### 发布前检查

```markdown
#### 性能检查

- [ ] 页面加载时间 < 3 秒
- [ ] 图片大小已优化
- [ ] 数据库查询已优化
- [ ] 内存泄漏已排查

#### 兼容性检查

- [ ] 微信开发者工具测试通过
- [ ] 不同设备尺寸适配正常
- [ ] 网络异常处理正常
- [ ] 离线状态处理正常

#### 安全检查

- [ ] 域名白名单已配置
- [ ] API 权限验证正常
- [ ] 用户数据保护到位
- [ ] 日志记录完整
```

## 🔄 规则更新机制

### 更新流程

1. **提出更新需求** - 通过 GitHub Issues 或团队讨论
2. **评估影响范围** - 分析对现有代码的影响
3. **起草更新内容** - 编写具体的规则变更
4. **团队评审** - 所有开发人员参与评审
5. **批准实施** - 项目负责人批准后实施
6. **更新文档** - 更新相关规则文档
7. **通知团队** - 通知所有相关人员

### 版本管理

- **主版本更新** (v2.0.0) - 重大架构变更
- **次版本更新** (v1.1.0) - 新增规则或重要修改
- **补丁版本更新** (v1.0.1) - 错误修正或小幅调整

## 📚 学习资源

### 官方文档

- [微信小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [Supabase 官方文档](https://supabase.com/docs)
- [PostgreSQL 官方文档](https://www.postgresql.org/docs/)

### 最佳实践

- [微信小程序性能优化指南](https://developers.weixin.qq.com/miniprogram/dev/framework/performance/)
- [Supabase 最佳实践](https://supabase.com/docs/guides/getting-started/best-practices)
- [PostgreSQL 性能调优](https://wiki.postgresql.org/wiki/Performance_Optimization)

### 工具推荐

- **开发工具**: 微信开发者工具
- **数据库管理**: Supabase Dashboard
- **版本控制**: Git + GitHub
- **文档编写**: Markdown + VSCode

## 🤝 团队协作规范

### 沟通渠道

- **日常沟通**: 团队群聊
- **技术讨论**: GitHub Discussions
- **问题反馈**: GitHub Issues
- **代码评审**: GitHub Pull Requests

### 会议制度

- **每日站会**: 同步进度和问题
- **周例会**: 回顾和计划
- **月度评审**: 规则执行情况评估

### 知识分享

- **技术分享**: 每月一次技术分享会
- **文档维护**: 及时更新项目文档
- **经验总结**: 项目结束后的经验总结

## 📞 联系方式

### 项目负责人

- **项目经理**: 负责整体项目管理
- **技术负责人**: 负责技术架构和规范制定
- **运维负责人**: 负责部署和运维规范

### 技术支持

- **开发团队**: 日常开发问题咨询
- **运维团队**: 部署和运维问题咨询
- **测试团队**: 质量保证和测试问题

---

**文档维护**: 开发团队  
**最后更新**: 2025 年 9 月 7 日  
**下次评审**: 2025 年 10 月 7 日  
**状态**: ✅ 当前有效

## 📝 更新日志

### v1.0.0 (2025-09-07)

- 🎉 初始版本发布
- 📋 创建项目总体规范
- 🗄️ 创建数据库规范
- 🔌 创建 API 接口规范
- 🚀 创建部署运维规范
- 📚 创建规则文档索引
